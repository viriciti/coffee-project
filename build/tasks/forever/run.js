var forever, fs, gulp, log, path;

forever = require("forever-monitor");

fs = require("fs");

gulp = require("gulp");

path = require("path");

log = require("../../lib/log");

module.exports = function(coffeeProjectOptions) {
  var child, enabled, entryFilePath, options, watchDirectoryPath;
  options = coffeeProjectOptions.forever;
  enabled = options.enabled;
  entryFilePath = path.resolve(options.entryFilePath);
  watchDirectoryPath = options.watchDirectoryPath;
  child = null;
  return gulp.task("forever:run", function(cb) {
    if (enabled !== true) {
      log.info("Skipping forever:run: Disabled.");
      return cb();
    }
    child = new forever.Monitor(entryFilePath, {
      watch: true,
      watchDirectory: watchDirectoryPath,
      minUptime: 2000,
      spinSleepTime: 1000
    });
    child.start();
    cb();
  });
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza3MvZm9yZXZlci9ydW4uanMiLCJzb3VyY2VzIjpbInRhc2tzL2ZvcmV2ZXIvcnVuLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLE9BQUEsR0FBVSxPQUFBLENBQVEsaUJBQVI7O0FBQ1YsRUFBQSxHQUFVLE9BQUEsQ0FBUSxJQUFSOztBQUNWLElBQUEsR0FBVSxPQUFBLENBQVEsTUFBUjs7QUFDVixJQUFBLEdBQVUsT0FBQSxDQUFRLE1BQVI7O0FBRVYsR0FBQSxHQUFNLE9BQUEsQ0FBUSxlQUFSOztBQUVOLE1BQU0sQ0FBQyxPQUFQLEdBQWlCLFNBQUMsb0JBQUQ7QUFDaEIsTUFBQTtFQUFBLE9BQUEsR0FBcUIsb0JBQW9CLENBQUM7RUFDMUMsT0FBQSxHQUFxQixPQUFPLENBQUM7RUFDN0IsYUFBQSxHQUFxQixJQUFJLENBQUMsT0FBTCxDQUFhLE9BQU8sQ0FBQyxhQUFyQjtFQUNyQixrQkFBQSxHQUFxQixPQUFPLENBQUM7RUFFN0IsS0FBQSxHQUFRO1NBRVIsSUFBSSxDQUFDLElBQUwsQ0FBVSxhQUFWLEVBQXlCLFNBQUMsRUFBRDtJQUN4QixJQUFPLE9BQUEsS0FBVyxJQUFsQjtNQUNDLEdBQUcsQ0FBQyxJQUFKLENBQVMsaUNBQVQ7QUFDQSxhQUFPLEVBQUEsQ0FBQSxFQUZSOztJQUlBLEtBQUEsR0FBUSxJQUFJLE9BQU8sQ0FBQyxPQUFaLENBQW9CLGFBQXBCLEVBQ1A7TUFBQSxLQUFBLEVBQWdCLElBQWhCO01BQ0EsY0FBQSxFQUFnQixrQkFEaEI7TUFFQSxTQUFBLEVBQWdCLElBRmhCO01BR0EsYUFBQSxFQUFnQixJQUhoQjtLQURPO0lBTVIsS0FBSyxDQUFDLEtBQU4sQ0FBQTtJQUVBLEVBQUEsQ0FBQTtFQWJ3QixDQUF6QjtBQVJnQiIsInNvdXJjZXNDb250ZW50IjpbImZvcmV2ZXIgPSByZXF1aXJlIFwiZm9yZXZlci1tb25pdG9yXCJcbmZzICAgICAgPSByZXF1aXJlIFwiZnNcIlxuZ3VscCAgICA9IHJlcXVpcmUgXCJndWxwXCJcbnBhdGggICAgPSByZXF1aXJlIFwicGF0aFwiXG5cbmxvZyA9IHJlcXVpcmUgXCIuLi8uLi9saWIvbG9nXCJcblxubW9kdWxlLmV4cG9ydHMgPSAoY29mZmVlUHJvamVjdE9wdGlvbnMpIC0+XG5cdG9wdGlvbnMgICAgICAgICAgICA9IGNvZmZlZVByb2plY3RPcHRpb25zLmZvcmV2ZXJcblx0ZW5hYmxlZCAgICAgICAgICAgID0gb3B0aW9ucy5lbmFibGVkXG5cdGVudHJ5RmlsZVBhdGggICAgICA9IHBhdGgucmVzb2x2ZSBvcHRpb25zLmVudHJ5RmlsZVBhdGhcblx0d2F0Y2hEaXJlY3RvcnlQYXRoID0gb3B0aW9ucy53YXRjaERpcmVjdG9yeVBhdGhcblxuXHRjaGlsZCA9IG51bGxcblxuXHRndWxwLnRhc2sgXCJmb3JldmVyOnJ1blwiLCAoY2IpIC0+XG5cdFx0dW5sZXNzIGVuYWJsZWQgaXMgdHJ1ZVxuXHRcdFx0bG9nLmluZm8gXCJTa2lwcGluZyBmb3JldmVyOnJ1bjogRGlzYWJsZWQuXCJcblx0XHRcdHJldHVybiBjYigpXG5cblx0XHRjaGlsZCA9IG5ldyBmb3JldmVyLk1vbml0b3IgZW50cnlGaWxlUGF0aCxcblx0XHRcdHdhdGNoOiAgICAgICAgICB0cnVlXG5cdFx0XHR3YXRjaERpcmVjdG9yeTogd2F0Y2hEaXJlY3RvcnlQYXRoXG5cdFx0XHRtaW5VcHRpbWU6ICAgICAgMjAwMFxuXHRcdFx0c3BpblNsZWVwVGltZTogIDEwMDBcblxuXHRcdGNoaWxkLnN0YXJ0KClcblxuXHRcdGNiKClcblxuXHRcdHJldHVyblxuIl19
