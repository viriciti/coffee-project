var cleanBuildDirectory, gulp, log, path;

path = require("path");

gulp = require("gulp");

log = require("../lib/log");

cleanBuildDirectory = require("../lib/clean").cleanBuildDirectory;

module.exports = function(coffeeProjectOptions) {
  var clientDirectoryPath, enabled, options, serverDirectoryPath, targetDirectoryPath;
  options = coffeeProjectOptions.clean;
  enabled = options.enabled;
  targetDirectoryPath = path.resolve(options.targetDirectoryPath);
  clientDirectoryPath = path.resolve(options.clientDirectoryPath);
  serverDirectoryPath = path.resolve(options.serverDirectoryPath);
  gulp.task("clean:client", function(cb) {
    if (!enabled) {
      log.info("Skipping clean client: Disabled.");
      return cb();
    }
    log.debug("[clean] Cleaning client build path `" + clientDirectoryPath + "`.");
    cleanBuildDirectory(clientDirectoryPath, cb);
  });
  gulp.task("clean:server", function(cb) {
    if (!enabled) {
      log.info("Skipping clean server: Disabled.");
      return cb();
    }
    log.debug("[clean] Cleaning server build path `" + serverDirectoryPath + "`.");
    cleanBuildDirectory(serverDirectoryPath, cb);
  });
  return gulp.task("clean", ["clean:client", "clean:server"], function(cb) {
    cb();
    process.exit();
  });
};

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFza3MvY2xlYW4uanMiLCJzb3VyY2VzIjpbInRhc2tzL2NsZWFuLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBOztBQUFBLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7QUFDUCxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVI7O0FBRVAsR0FBQSxHQUFNLE9BQUEsQ0FBUSxZQUFSOztBQUVKLHNCQUF3QixPQUFBLENBQVEsY0FBUjs7QUFFMUIsTUFBTSxDQUFDLE9BQVAsR0FBaUIsU0FBQyxvQkFBRDtBQUNoQixNQUFBO0VBQUEsT0FBQSxHQUFzQixvQkFBb0IsQ0FBQztFQUMzQyxPQUFBLEdBQXNCLE9BQU8sQ0FBQztFQUM5QixtQkFBQSxHQUFzQixJQUFJLENBQUMsT0FBTCxDQUFhLE9BQU8sQ0FBQyxtQkFBckI7RUFDdEIsbUJBQUEsR0FBc0IsSUFBSSxDQUFDLE9BQUwsQ0FBYSxPQUFPLENBQUMsbUJBQXJCO0VBQ3RCLG1CQUFBLEdBQXNCLElBQUksQ0FBQyxPQUFMLENBQWEsT0FBTyxDQUFDLG1CQUFyQjtFQUV0QixJQUFJLENBQUMsSUFBTCxDQUFVLGNBQVYsRUFBMEIsU0FBQyxFQUFEO0lBQ3pCLElBQUEsQ0FBTyxPQUFQO01BQ0MsR0FBRyxDQUFDLElBQUosQ0FBUyxrQ0FBVDtBQUNBLGFBQU8sRUFBQSxDQUFBLEVBRlI7O0lBSUEsR0FBRyxDQUFDLEtBQUosQ0FBVSxzQ0FBQSxHQUF1QyxtQkFBdkMsR0FBMkQsSUFBckU7SUFFQSxtQkFBQSxDQUFvQixtQkFBcEIsRUFBeUMsRUFBekM7RUFQeUIsQ0FBMUI7RUFXQSxJQUFJLENBQUMsSUFBTCxDQUFVLGNBQVYsRUFBMEIsU0FBQyxFQUFEO0lBQ3pCLElBQUEsQ0FBTyxPQUFQO01BQ0MsR0FBRyxDQUFDLElBQUosQ0FBUyxrQ0FBVDtBQUNBLGFBQU8sRUFBQSxDQUFBLEVBRlI7O0lBSUEsR0FBRyxDQUFDLEtBQUosQ0FBVSxzQ0FBQSxHQUF1QyxtQkFBdkMsR0FBMkQsSUFBckU7SUFFQSxtQkFBQSxDQUFvQixtQkFBcEIsRUFBeUMsRUFBekM7RUFQeUIsQ0FBMUI7U0FXQSxJQUFJLENBQUMsSUFBTCxDQUFVLE9BQVYsRUFBbUIsQ0FBQyxjQUFELEVBQWlCLGNBQWpCLENBQW5CLEVBQXFELFNBQUMsRUFBRDtJQUNwRCxFQUFBLENBQUE7SUFFQSxPQUFPLENBQUMsSUFBUixDQUFBO0VBSG9ELENBQXJEO0FBN0JnQiIsInNvdXJjZXNDb250ZW50IjpbInBhdGggPSByZXF1aXJlIFwicGF0aFwiXG5ndWxwID0gcmVxdWlyZSBcImd1bHBcIlxuXG5sb2cgPSByZXF1aXJlIFwiLi4vbGliL2xvZ1wiXG5cbnsgY2xlYW5CdWlsZERpcmVjdG9yeSB9ID0gcmVxdWlyZSBcIi4uL2xpYi9jbGVhblwiXG5cbm1vZHVsZS5leHBvcnRzID0gKGNvZmZlZVByb2plY3RPcHRpb25zKSAtPlxuXHRvcHRpb25zICAgICAgICAgICAgID0gY29mZmVlUHJvamVjdE9wdGlvbnMuY2xlYW5cblx0ZW5hYmxlZCAgICAgICAgICAgICA9IG9wdGlvbnMuZW5hYmxlZFxuXHR0YXJnZXREaXJlY3RvcnlQYXRoID0gcGF0aC5yZXNvbHZlIG9wdGlvbnMudGFyZ2V0RGlyZWN0b3J5UGF0aFxuXHRjbGllbnREaXJlY3RvcnlQYXRoID0gcGF0aC5yZXNvbHZlIG9wdGlvbnMuY2xpZW50RGlyZWN0b3J5UGF0aFxuXHRzZXJ2ZXJEaXJlY3RvcnlQYXRoID0gcGF0aC5yZXNvbHZlIG9wdGlvbnMuc2VydmVyRGlyZWN0b3J5UGF0aFxuXG5cdGd1bHAudGFzayBcImNsZWFuOmNsaWVudFwiLCAoY2IpIC0+XG5cdFx0dW5sZXNzIGVuYWJsZWRcblx0XHRcdGxvZy5pbmZvIFwiU2tpcHBpbmcgY2xlYW4gY2xpZW50OiBEaXNhYmxlZC5cIlxuXHRcdFx0cmV0dXJuIGNiKClcblxuXHRcdGxvZy5kZWJ1ZyBcIltjbGVhbl0gQ2xlYW5pbmcgY2xpZW50IGJ1aWxkIHBhdGggYCN7Y2xpZW50RGlyZWN0b3J5UGF0aH1gLlwiXG5cblx0XHRjbGVhbkJ1aWxkRGlyZWN0b3J5IGNsaWVudERpcmVjdG9yeVBhdGgsIGNiXG5cblx0XHRyZXR1cm5cblxuXHRndWxwLnRhc2sgXCJjbGVhbjpzZXJ2ZXJcIiwgKGNiKSAtPlxuXHRcdHVubGVzcyBlbmFibGVkXG5cdFx0XHRsb2cuaW5mbyBcIlNraXBwaW5nIGNsZWFuIHNlcnZlcjogRGlzYWJsZWQuXCJcblx0XHRcdHJldHVybiBjYigpXG5cblx0XHRsb2cuZGVidWcgXCJbY2xlYW5dIENsZWFuaW5nIHNlcnZlciBidWlsZCBwYXRoIGAje3NlcnZlckRpcmVjdG9yeVBhdGh9YC5cIlxuXG5cdFx0Y2xlYW5CdWlsZERpcmVjdG9yeSBzZXJ2ZXJEaXJlY3RvcnlQYXRoLCBjYlxuXG5cdFx0cmV0dXJuXG5cblx0Z3VscC50YXNrIFwiY2xlYW5cIiwgW1wiY2xlYW46Y2xpZW50XCIsIFwiY2xlYW46c2VydmVyXCJdLCAoY2IpIC0+XG5cdFx0Y2IoKVxuXG5cdFx0cHJvY2Vzcy5leGl0KClcblxuXHRcdHJldHVyblxuXG4iXX0=
